# Debug Guide –∑–∞ Language Switching

## –ü—Ä–æ–±–ª–µ–º: –°–º—è–Ω–∞—Ç–∞ –Ω–∞ –µ–∑–∏–∫–∞ –Ω–µ —Ä–∞–±–æ—Ç–∏

### –°—Ç—ä–ø–∫–∞ 1: –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –ø—Ä–æ–º–µ–Ω–∏—Ç–µ —Å–∞ –∏–∑—Ç–µ–≥–ª–µ–Ω–∏

```bash
git pull origin main
```

### –°—Ç—ä–ø–∫–∞ 2: –†–µ—Å—Ç–∞—Ä—Ç–∏—Ä–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ

```bash
# –°–ø—Ä–µ—Ç–µ —Ç–µ–∫—É—â–∏—è –ø—Ä–æ—Ü–µ—Å (Ctrl+C)
python dev_run.py
```

### –°—Ç—ä–ø–∫–∞ 3: –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ debug —Å—ä–æ–±—â–µ–Ω–∏—è—Ç–∞

–ö–æ–≥–∞—Ç–æ –∏–∑–±–µ—Ä–µ—Ç–µ "–ë—ä–ª–≥–∞—Ä—Å–∫–∏", —Ç—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—Ç–µ –≤ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞:

```
üåê [LANGUAGE] Language set to: bg
üåê [LANGUAGE] Session language value: bg
üåê [LANGUAGE] Forced Babel locale to: bg
üåê [LOCALE] Using language from session: bg
```

### –°—Ç—ä–ø–∫–∞ 4: –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ Session

–í –±—Ä–∞—É–∑—ä—Ä–∞ (DevTools ‚Üí Application ‚Üí Cookies), –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∏–º–∞ cookie —Å –∏–º–µ `session`.

### –°—Ç—ä–ø–∫–∞ 5: –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –ø—Ä–µ–≤–æ–¥–∏—Ç–µ —Å–∞ –∫–æ–º–ø–∏–ª–∏—Ä–∞–Ω–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ .mo —Ñ–∞–π–ª–æ–≤–µ—Ç–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—Ç
ls -la translations/bg/LC_MESSAGES/*.mo
ls -la translations/en/LC_MESSAGES/*.mo

# –ê–∫–æ –Ω–µ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞—Ç, –∫–æ–º–ø–∏–ª–∏—Ä–∞–π—Ç–µ:
pybabel compile -d translations
# –∏–ª–∏
python -m babel.messages.frontend compile -d translations
```

### –°—Ç—ä–ø–∫–∞ 6: –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ Flask-Babel –µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω

```bash
python -c "from flask_babel import Babel; print('Flask-Babel OK')"
```

### –°—Ç—ä–ø–∫–∞ 7: –¢–µ—Å—Ç –Ω–∞ session

–î–æ–±–∞–≤–µ—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –≤ `app/routes/language_routes.py` —Å–ª–µ–¥ `session['language'] = language`:

```python
print(f"DEBUG: Session keys: {list(session.keys())}")
print(f"DEBUG: Session language: {session.get('language')}")
print(f"DEBUG: Session modified: {session.modified}")
```

### –°—Ç—ä–ø–∫–∞ 8: –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∏–º–∞ JavaScript –≥—Ä–µ—à–∫–∏

–û—Ç–≤–æ—Ä–µ—Ç–µ –±—Ä–∞—É–∑—ä—Ä –∫–æ–Ω–∑–æ–ª–∞—Ç–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ –∑–∞ –≥—Ä–µ—à–∫–∏ –∫–æ–≥–∞—Ç–æ –∫–ª–∏–∫–Ω–µ—Ç–µ –Ω–∞ language switcher-–∞.

### –°—Ç—ä–ø–∫–∞ 9: Hard refresh –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞

–°–ª–µ–¥ –∫–∞—Ç–æ –∏–∑–±–µ—Ä–µ—Ç–µ –µ–∑–∏–∫, –Ω–∞–ø—Ä–∞–≤–µ—Ç–µ hard refresh:
- Windows/Linux: Ctrl+Shift+R –∏–ª–∏ Ctrl+F5
- Mac: Cmd+Shift+R

### –°—Ç—ä–ø–∫–∞ 10: –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∏–º–∞ –ø—Ä–æ–±–ª–µ–º —Å CSRF

–ê–∫–æ –∏–º–∞ CSRF –≥—Ä–µ—à–∫–∏, –º–æ–∂–µ –¥–∞ –±–ª–æ–∫–∏—Ä–∞—Ç session –ø—Ä–æ–º–µ–Ω–∏—Ç–µ. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –ª–æ–≥–æ–≤–µ—Ç–µ –∑–∞ CSRF –≥—Ä–µ—à–∫–∏.

## –ß–µ—Å—Ç–æ —Å—Ä–µ—â–∞–Ω–∏ –ø—Ä–æ–±–ª–µ–º–∏:

1. **Session –Ω–µ —Å–µ –∑–∞–ø–∞–∑–≤–∞** - –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ `data/flask_sessions/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ç–∞ —Å—ä—â–µ—Å—Ç–≤—É–≤–∞ –∏ –∏–º–∞ –ø—Ä–∞–≤–∞ –∑–∞ –∑–∞–ø–∏—Å
2. **–ü—Ä–µ–≤–æ–¥–∏—Ç–µ –Ω–µ —Å–∞ –∫–æ–º–ø–∏–ª–∏—Ä–∞–Ω–∏** - –ö–æ–º–ø–∏–ª–∏—Ä–∞–π—Ç–µ —Å `pybabel compile -d translations`
3. **Flask-Babel –Ω–µ –µ –∏–Ω—Å—Ç–∞–ª–∏—Ä–∞–Ω** - –ò–Ω—Å—Ç–∞–ª–∏—Ä–∞–π—Ç–µ —Å `pip install Flask-Babel Babel`
4. **Browser cache** - –ù–∞–ø—Ä–∞–≤–µ—Ç–µ hard refresh –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ç–∞
5. **Session cookie –Ω–µ —Å–µ –∑–∞–ø–∞–∑–≤–∞** - –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∏–º–∞ –ø—Ä–æ–±–ª–µ–º–∏ —Å cookies –≤ –±—Ä–∞—É–∑—ä—Ä–∞

## –¢–µ—Å—Ç –Ω–∞ —Ä—ä–∫–∞:

1. –û—Ç–≤–æ—Ä–µ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ—Ç–æ
2. –û—Ç–≤–æ—Ä–µ—Ç–µ –±—Ä–∞—É–∑—ä—Ä –∫–æ–Ω–∑–æ–ª–∞—Ç–∞ (F12)
3. –ò–∑–ø—ä–ª–Ω–µ—Ç–µ: `document.cookie` - —Ç—Ä—è–±–≤–∞ –¥–∞ –≤–∏–¥–∏—Ç–µ session cookie
4. –ö–ª–∏–∫–Ω–µ—Ç–µ –Ω–∞ "–ë—ä–ª–≥–∞—Ä—Å–∫–∏"
5. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –∫–æ–Ω–∑–æ–ª–∞—Ç–∞ –Ω–∞ —Å—ä—Ä–≤—ä—Ä–∞ –∑–∞ debug —Å—ä–æ–±—â–µ–Ω–∏—è
6. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –±—Ä–∞—É–∑—ä—Ä –∫–æ–Ω–∑–æ–ª–∞—Ç–∞ –∑–∞ –≥—Ä–µ—à–∫–∏
7. –ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –æ—Ç–Ω–æ–≤–æ `document.cookie` - —Ç—Ä—è–±–≤–∞ –¥–∞ –∏–º–∞ –ø—Ä–æ–º—è–Ω–∞
